<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="QuranJourney.Pages.Onboarding.LevelSelection"
             Title="Choose Your Level"
             BackgroundColor="#F9FAFB">

    <Grid x:Name="QuestionGrid" Grid.Row="0" VerticalOptions="Center" HorizontalOptions="Center" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <VerticalStackLayout Padding="20,20,20,20" Spacing="30" BackgroundColor="White">
            <!-- ðŸ”¹ Fixed Header -->
            <Grid ColumnDefinitions="Auto, *" VerticalOptions="Start" HeightRequest="50">
                <!-- Back Icon -->
                <Image x:Name="BackIcon"
               Source="back.png"
               HeightRequest="28"
               WidthRequest="28"
               VerticalOptions="Center"
               HorizontalOptions="Start">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="Back_Tapped" />
                    </Image.GestureRecognizers>
                </Image>

                <!-- Progress Bar Container -->
                <Grid x:Name="ProgressBarContainer"
                          Grid.Column="1"
                          Margin="15,0,0,0"
                          HeightRequest="14"
                          HorizontalOptions="FillAndExpand"
                          VerticalOptions="Center">

                    <!-- Gray background -->
                    <BoxView BackgroundColor="#E0E0E0"
                     CornerRadius="7"
                     HeightRequest="14"
                     HorizontalOptions="FillAndExpand"
                     VerticalOptions="Center" />

                    <!-- Green filled portion -->
                    <BoxView x:Name="ProgressFill"
                     BackgroundColor="#58CC02"
                     CornerRadius="7"
                     HeightRequest="14"
                     WidthRequest="400  "
                     HorizontalOptions="Start"
                     VerticalOptions="Center" />
                </Grid>
            </Grid>
        </VerticalStackLayout>


        <!-- MAIN CONTENT -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="25" Padding="20,10">

                <Grid RowDefinitions="Auto, *" ColumnDefinitions="*">

                    <!-- Top fixed section -->
                    <Grid Grid.Row="0" ColumnSpacing="10" Padding="10,0" Margin="0,-24,0,0" VerticalOptions="Start">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- GIF -->
                        <WebView WidthRequest="200" HeightRequest="150">
                            <WebView.Source>
                                <HtmlWebViewSource>
                                    <HtmlWebViewSource.Html>
                                        <![CDATA[
                        <html>
                            <body style="margin:0; padding:0; display:flex; justify-content:flex-start; align-items:center; background: transparent; overflow:hidden; height:90%; width:90%;">
                                <img src="giphy.gif" style="width:70%; height:80%; background: transparent; margin-left:0px; display:block;" />
                            </body>
                        </html>
                        ]]>
                                    </HtmlWebViewSource.Html>
                                </HtmlWebViewSource>
                            </WebView.Source>
                        </WebView>

                        <Frame Grid.Column="1"
       BackgroundColor="White"
       BorderColor="White"
       CornerRadius="18"
       Padding="10"
       Margin="-74,0,0,0"
       HasShadow="False"
       VerticalOptions="Center"
       HorizontalOptions="Start">
                            <Label x:Name="QuestionLabel"
           FontSize="16"
           TextColor="Black"
           FontFamily="Sans-Serif"
           VerticalTextAlignment="Center"
           HorizontalTextAlignment="Center"/>
                        </Frame>
                    </Grid>

                    <!-- Scrollable content -->
                    <ScrollView Grid.Row="1"
            VerticalOptions="Start"
            BackgroundColor="White">

                        <VerticalStackLayout Padding="20,40,20,40"
                         Spacing="30"
                         VerticalOptions="Start">
                            <!-- Levels Grid -->
                            <Grid RowDefinitions="Auto,Auto,Auto"
              RowSpacing="25"
              Padding="10,0"
              VerticalOptions="Start">

                                <!-- Beginner -->
                                <Border x:Name="BeginnerBox"
                    Grid.Row="0"
                    BackgroundColor="White"
                    StrokeShape="RoundRectangle 25"
                    StrokeThickness="2"
                    Stroke="#58CC02"
                    HeightRequest="120">
                                    <Border.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnLevelTapped" CommandParameter="Beginner"/>
                                    </Border.GestureRecognizers>
                                    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="4">
                                        <Label Text="ðŸŒ± Beginner"
                           FontAttributes="Bold"
                           FontSize="22"
                           TextColor="#58CC02"
                           HorizontalOptions="Center"/>
                                        <Label Text="Start your journey"
                           FontSize="15"
                           TextColor="#666"
                           HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Border>

                                <!-- Intermediate -->
                                <Border x:Name="IntermediateBox"
                    Grid.Row="1"
                    BackgroundColor="White"
                    StrokeShape="RoundRectangle 25"
                    StrokeThickness="2"
                    Stroke="#FFA500"
                    HeightRequest="120">
                                    <Border.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnLevelTapped" CommandParameter="Intermediate"/>
                                    </Border.GestureRecognizers>
                                    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="4">
                                        <Label Text="ðŸ”¥ Intermediate"
                           FontAttributes="Bold"
                           FontSize="22"
                           TextColor="#FFA500"
                           HorizontalOptions="Center"/>
                                        <Label Text="Continue growing"
                           FontSize="15"
                           TextColor="#666"
                           HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Border>

                                <!-- Advanced -->
                                <Border x:Name="AdvancedBox"
                    Grid.Row="2"
                    BackgroundColor="White"
                    StrokeShape="RoundRectangle 25"
                    StrokeThickness="2"
                    Stroke="#FF4444"
                    HeightRequest="120">
                                    <Border.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnLevelTapped" CommandParameter="Advanced"/>
                                    </Border.GestureRecognizers>
                                    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="4">
                                        <Label Text="ðŸ† Advanced"
                           FontAttributes="Bold"
                           FontSize="22"
                           TextColor="#FF4444"
                           HorizontalOptions="Center"/>
                                        <Label Text="Master your skills"
                           FontSize="15"
                           TextColor="#666"
                           HorizontalOptions="Center"/>
                                    </VerticalStackLayout>
                                </Border>

                            </Grid>
                        </VerticalStackLayout>
                    </ScrollView>

                </Grid>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>

</ContentPage>
