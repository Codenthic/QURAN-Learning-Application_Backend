<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="QuranJourney.Pages.Courses.Beginner.Beginner_Learn_Quran"
             BackgroundColor="White"
             Title="Learn Quran">

    <Grid RowDefinitions="Auto,*,Auto" Padding="0">
        <!-- ðŸ”¹ HEADER -->
        <VerticalStackLayout Grid.Row="0" Padding="20,20,20,0" Spacing="12">
            <VerticalStackLayout Padding="20,-10,20,20" Spacing="30" BackgroundColor="White">
                <!-- ðŸ”¹ Fixed Header -->
                <Grid ColumnDefinitions="Auto, *" VerticalOptions="Start" HeightRequest="50">
                    <!-- Back Icon -->
                    <Image x:Name="BackIcon"
                          Source="x.png"
                          HeightRequest="28"
                          WidthRequest="28"
                          VerticalOptions="Center"
                          HorizontalOptions="Start">
                          <Image.GestureRecognizers>
                            <TapGestureRecognizer />
                        </Image.GestureRecognizers>
                    </Image>

                    <!-- Progress Bar Container -->
                    <Grid x:Name="ProgressBarContainer"
              Grid.Column="1"
              Margin="15,0,0,0"
              HeightRequest="14"
              HorizontalOptions="FillAndExpand"
              VerticalOptions="Center">

                        <!-- Gray background -->
                        <BoxView BackgroundColor="#E0E0E0"
         CornerRadius="7"
         HeightRequest="14"
         HorizontalOptions="FillAndExpand"
         VerticalOptions="Center" />

                        <!-- Green filled portion -->
                        <BoxView x:Name="ProgressFill"
         BackgroundColor="#58CC02"
         CornerRadius="7"
         HeightRequest="14"
         WidthRequest="0"
         HorizontalOptions="Start"
         VerticalOptions="Center" />
                    </Grid>
                </Grid>
            </VerticalStackLayout>
            <WebView
    x:Name="ResultGifWebView"
    HeightRequest="300"
    WidthRequest="300"
    IsVisible="True"
    BackgroundColor="Transparent"
    HorizontalOptions="Center"
    VerticalOptions="End"
    ZIndex="10">

                <WebView.Source>
                    <HtmlWebViewSource>
                        <HtmlWebViewSource.Html>
                            <![CDATA[
                                <html>
                                <head>
                                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                </head>
                                <body style="margin:0; padding:0; background:transparent;
                                             display:flex; justify-content:center; align-items:center;
                                             width:100%; height:100%; overflow:hidden;">
                                
                                    <img id="gif" 
                                         src="correctanswer.gif"
                                         style="width:100%; height:auto; object-fit:contain;" />
                                
                                </body>
                                </html>
                                     ]]>
                        </HtmlWebViewSource.Html>
                    </HtmlWebViewSource>
                </WebView.Source>
            </WebView>
            <!-- Question -->
            <Label x:Name="QuestionLabel"
                   Text="What sound does this make?"
                   FontSize="20"
                   FontAttributes="Bold"
                   TextColor="Black" />
        </VerticalStackLayout>

        <!-- ðŸ”¹ CENTER CONTENT -->
        <VerticalStackLayout Grid.Row="1" Padding="10,0,10,0" Spacing="20"
                             VerticalOptions="Center" HorizontalOptions="Center">
            <!-- Arabic Letter Card -->
            <Frame x:Name="LetterCard"
                   BackgroundColor="#1CB0F6"
                   CornerRadius="20"
                   WidthRequest="220"
                   HeightRequest="220"
                   HasShadow="False"
                   HorizontalOptions="Center">
                <Grid>
                    <Label x:Name="ArabicLetterLabel"
                            Text="Ø¡"
                           FontSize="70"
                           TextColor="White"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />
                    <Button x:Name="SpeakerButton"
                            ImageSource="volume_icon.png"
                            WidthRequest="70"
                            HeightRequest="70"
                            BackgroundColor="Transparent"
                            HorizontalOptions="End"
                            VerticalOptions="End"
                            Margin="0,0,-30,-30"
                            Clicked="SpeakerButton_Clicked"/>
                </Grid>
            </Frame>

            <!-- Answer Options -->
            <Grid x:Name="OptionsGrid"
                  ColumnDefinitions="*,*,*"
                  RowDefinitions="Auto,Auto"
                  ColumnSpacing="10"
                  RowSpacing="10"
                  HorizontalOptions="Center">
                <!-- Buttons dynamically added in code-behind -->
            </Grid>
            <!-- Result GIF WebView -->

            <!-- CHECK BUTTON -->
            <Grid Grid.Row="2" Padding="20,30,20,25">
                <Button x:Name="CheckButton"
                Text="CHECK"
                FontSize="18"
                FontAttributes="Bold"
                BackgroundColor="#E0E0E0"
                TextColor="White"
                CornerRadius="14"
                HeightRequest="55"
                Clicked="CheckButton_Clicked"
                HorizontalOptions="FillAndExpand" />
            </Grid>

        </VerticalStackLayout>
    </Grid>
</ContentPage>
